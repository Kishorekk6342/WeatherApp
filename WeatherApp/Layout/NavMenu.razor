@inject JsSupabaseAuthService JsAuth
@inject NavigationManager Nav

<MudNavMenu>

    <MudNavLink Href="/" Icon="@Icons.Material.Filled.Home" Match="NavLinkMatch.All">
        Home
    </MudNavLink>

    @if (_user != null)
    {
        <MudNavLink Href="/profile" Icon="@Icons.Material.Filled.Person">
            Profile
        </MudNavLink>

        <MudNavLink Href="/recent-searches" Icon="@Icons.Material.Filled.History">
            Recent Searches
        </MudNavLink>

        <MudNavLink Href="/favorites" Icon="@Icons.Material.Filled.Star">
            Favorites
        </MudNavLink>
    }
    else
    {
        <MudNavLink Href="/login" Icon="@Icons.Material.Filled.Login">
            Login
        </MudNavLink>

        <MudNavLink Href="/register" Icon="@Icons.Material.Filled.AppRegistration">
            Sign Up
        </MudNavLink>
    }

</MudNavMenu>

@code {
    private UserDto? _user;

    protected override async Task OnInitializedAsync()
    {
        _user = await JsAuth.GetCurrentUserAsync();
    }
}
